(()=>{"use strict";var e,t={420:(e,t,r)=>{const o=window.wp.blocks,a=window.wp.i18n,i=window.wp.blockEditor,n=window.wp.element,c=window.wp.components,l=window.wp.apiFetch;var s=r.n(l);const d=window.ReactJSXRuntime,u=JSON.parse('{"UU":"create-block/city-coordinates"}');(0,o.registerBlockType)(u.UU,{edit:function({attributes:e,setAttributes:t}){const{cityId:r,latitude:o,longitude:l,temperature:u,tempUnit:p,weatherIcon:h}=e,[g,m]=(0,n.useState)([]),[v,w]=(0,n.useState)({latitude:o||"Not available",longitude:l||"Not available"}),[f,b]=(0,n.useState)(""),[y,x]=(0,n.useState)(p||"metric");(0,n.useEffect)((()=>{s()({path:"/wp/v2/city?per_page=-1"}).then((e=>{const t=e.map((e=>({label:e.title.rendered,value:e.id})));m(t)}))}),[]),(0,n.useEffect)((()=>{console.log("Current cityId:",r),console.log("Current coordinates state:",v),r&&s()({path:`/custom/v1/city/${r}`}).then((e=>{console.log("City Data:",e);const r=e.latitude||"",o=e.longitude||"",a=e.city||"New York";r&&o?(w({latitude:r,longitude:o}),t({latitude:r,longitude:o})):fetch(`https://api.openweathermap.org/data/2.5/weather?q=${a}&appid=c34faa787c3c0e3df9f3a5410ae189e2&units=${y}`).then((e=>e.json())).then((e=>{const r=e.main?e.main.temp:"Unavailable",o=e.coord.lat||"Not available",a=e.coord.lon||"Not available",i=e.weather[0].icon||"";w({latitude:o,longitude:a}),t({latitude:o,longitude:a,temperature:r,weatherIcon:i})})).catch((e=>{console.error("Weather API fetch error:",e),w({latitude:"Error",longitude:"Error"}),t({temperature:"Error"})})),b(a),t({cityName:a})})).catch((e=>{console.error("API fetch error:",e),w({latitude:"Error",longitude:"Error"}),t({temperature:"Error"})}))}),[r,y]);const j="metric"===y?"째C":"째F",_=h?`https://openweathermap.org/img/wn/${h}.png`:"";return(0,d.jsxs)("div",{...(0,i.useBlockProps)(),children:[(0,d.jsx)(i.InspectorControls,{children:(0,d.jsxs)(c.PanelBody,{title:(0,a.__)("City Weather Settings","city-coordinates"),children:[(0,d.jsx)(c.SelectControl,{label:(0,a.__)("Select City","city-coordinates"),value:r,options:g,onChange:e=>t({cityId:e})}),(0,d.jsx)(c.TextControl,{label:(0,a.__)("Latitude","city-coordinates"),value:v.latitude,disabled:!0}),(0,d.jsx)(c.TextControl,{label:(0,a.__)("Longitude","city-coordinates"),value:v.longitude,disabled:!0}),(0,d.jsx)(c.SelectControl,{label:(0,a.__)("Temperature Unit","city-coordinates"),value:y,options:[{label:(0,a.__)("Celsius","city-coordinates"),value:"metric"},{label:(0,a.__)("Fahrenheit","city-coordinates"),value:"imperial"}],onChange:e=>{x(e),t({tempUnit:e}),r&&s()({path:`/custom/v1/city/${r}`}).then((r=>{const o=r.city||"New York";fetch(`https://api.openweathermap.org/data/2.5/weather?q=${o}&appid=c34faa787c3c0e3df9f3a5410ae189e2&units=${e}`).then((e=>e.json())).then((e=>{const r=e.main?e.main.temp:"Unavailable",o=e.weather[0].icon||"";t({temperature:r,weatherIcon:o})})).catch((e=>{console.error("Weather API fetch error:",e),t({temperature:"Error"})}))})).catch((e=>{console.error("API fetch error:",e)}))}}),(0,d.jsx)(c.TextControl,{label:(0,a.__)("Temperature","city-coordinates"),value:u?`${u} ${j}`:"Loading...",disabled:!0})]})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Selected City:"})," ",f]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Temperature:"})," ",u?`${u} ${j}`:"Loading..."]}),_&&(0,d.jsx)("img",{src:_,alt:"Weather icon"})]})]})},save:function({attributes:e}){const{cityName:t,latitude:r,longitude:o,temperature:a,tempUnit:n,weatherIcon:c}=e,l="metric"===n?"째C":"째F",s=c?`https://openweathermap.org/img/wn/${c}.png`:"";return(0,d.jsx)("div",{...i.useBlockProps.save(),children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Selected City:"})," ",t]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Latitude:"})," ",r||"Not available"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Longitude:"})," ",o||"Not available"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Temperature:"})," ",a?`${a} ${l}`:"Loading..."]}),s&&(0,d.jsx)("img",{src:s,alt:"Weather icon"})]})})}})}},r={};function o(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,r,a,i)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],i=e[d][2];for(var c=!0,l=0;l<r.length;l++)(!1&i||n>=i)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(c=!1,i<n&&(n=i));if(c){e.splice(d--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,a,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,n=r[0],c=r[1],l=r[2],s=0;if(n.some((t=>0!==e[t]))){for(a in c)o.o(c,a)&&(o.m[a]=c[a]);if(l)var d=l(o)}for(t&&t(r);s<n.length;s++)i=n[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},r=self.webpackChunkcity_coordinates=self.webpackChunkcity_coordinates||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=o.O(void 0,[350],(()=>o(420)));a=o.O(a)})();